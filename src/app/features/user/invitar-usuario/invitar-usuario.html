<div class="invitacion-container">
  <div class="header">
    <button class="btn-volver" (click)="volver()">← Volver</button>
    <h2>Invitar Usuario al Proyecto</h2>
  </div>
  
  <div class="form-card">
    <form (ngSubmit)="enviarInvitacion()" #invitacionForm="ngForm">
      <div class="form-group">
        <label for="email">Email del usuario</label>
        <input 
          type="email" 
          id="email" 
          [(ngModel)]="nuevaInvitacion.email_invitado"
          name="email"
          required
          placeholder="usuario@ejemplo.com"
          [disabled]="enviando">
      </div>

      <div class="form-group">
        <label for="rol">Rol en el proyecto</label>
        <select 
          id="rol" 
          [(ngModel)]="nuevaInvitacion.rol_asignado"
          name="rol"
          required
          [disabled]="enviando">
          <option value="MEMBER">Miembro</option>
          <option value="ADMIN">Administrador</option>
          <option value="VIEWER">Observador</option>
        </select>
      </div>

      <div class="form-actions">
        <button type="button" class="btn-cancelar" (click)="volver()">
          Cancelar
        </button>
        <button type="submit" class="btn-enviar" [disabled]="!invitacionForm.valid || enviando">
          {{ enviando ? 'Enviando...' : 'Enviar Invitación' }}
        </button>
      </div>
    </form>

    <div class="alerta alerta-exito" *ngIf="mensajeExito">
      {{ mensajeExito }}
    </div>

    <div class="alerta alerta-error" *ngIf="mensajeError">
      {{ mensajeError }}
    </div>
  </div>

  <!-- Lista de invitaciones pendientes -->
  <div class="invitaciones-pendientes" *ngIf="invitacionesPendientes.length > 0">
    <h3>Invitaciones Pendientes</h3>
    <div class="invitacion-item" *ngFor="let inv of invitacionesPendientes">
      <div class="invitacion-info">
        <p class="email"><strong>{{ inv.email_invitado }}</strong></p>
        <p class="nombre">{{ inv.nombre_invitado }}</p>
        <span class="badge">{{ inv.rol_asignado }}</span>
        <p class="fecha">Enviada: {{ inv.fecha_invitacion | date:'short' }}</p>
      </div>
      <button class="btn-cancelar-inv" (click)="cancelarInvitacion(inv.id!)">
        Cancelar
      </button>
    </div>
  </div>

  <div class="empty-state" *ngIf="invitacionesPendientes.length === 0">
    <p>No hay invitaciones pendientes</p>
  </div>
</div>